{% extends 'base.html' %}
{% load static %}
{% load humanize %}

{% block page_name %} 
<span class="hidden-md hidden-lg">{{ project.short_name }}</span>
<span class="hidden-sm hidden-xs">{{ project.full_name }}</span>
{% endblock page_name %}

{% block content %}
{% include 'partials/messages.html' %}
<!-- QUICK WIDGETS -->
<div class="row">
    <div class="col-lg-4 col-md-6 col-sm-6">
        <div class="card card-stats">
            <div class="card-header" data-background-color="orange">
                <i class="material-icons">assessment</i>
            </div>
            <div class="card-content">
                <p class="category">Variations</p>
                <h3 class="title">{{ variation_percentage }}%</h3>
            </div>
            <div class="card-footer">
                <div class="stats">
                    <i class="material-icons">date_range</i> Variations to contract amount
                </div>
            </div>
        </div>
    </div>
    <div class="col-lg-4 col-md-6 col-sm-6">
        <div class="card card-stats">
            <div class="card-header" data-background-color="green">
                <i class="material-icons">date_range</i>
            </div>
            <div class="card-content">
                <p class="category">Completion D.</p>
                <h3 class="title">{{ actual_completion_date|naturalday:'M d, y'|title }}</h3>
            </div>
            <div class="card-footer">
                <div class="stats">
                    <i class="material-icons">local_offer</i> After time extensions
                </div>
            </div>
        </div>
    </div>

    <div class="col-lg-4 col-md-6 col-sm-6">
        <div class="card card-stats">
            <div class="card-header" data-background-color="red">
                <i class="material-icons">alarm</i>
            </div>

            <div class="card-content">
                <p class="category">Countdown</p>
                <h3 class="title {% if countdown.days < 0 %} text-danger {% endif %}">{{ countdown.days|stringformat:'02d' }}</h3>
            </div>
           
            {% if countdown.days >= 0 %}
            <div class="card-footer">
                <div class="stats">
                    <i class="material-icons">update</i> Remaining calendar days
                </div>
            </div>
            {% else %}
            <div class="card-footer">
                <div class="stats">
                    <i class="fa fa-warning text-danger"></i>&nbsp; Slippage in calendar days
                </div>
            </div>
            {% endif %}
        </div>
    </div>
</div><!-- /.row -->

<!-- PROJECT SUMMARY -->
<div class="row">
    
    <!-- PROJECT SUMMARY -->
    <div class="col-md-6">
        <div class="card" data-mh="project-summary">
            <div class="card-header" data-background-color="purple">
                <h4 class="title">Project Summary</h4>
                <p class="category hidden-xs hidden-sm">Description and summary of the construction project</p>
            </div>
            <div class="card-content">
                <dl>
                    <dt>Official Project Title</dt>
                    <dd>{{ project.full_name }}</dd>

                    <dt>Project Type</dt>
                    <dd>{{ project.construction_type.title|title }}</dd>

                    <dt>Employer</dt>
                    <dd>{{ project.employer }}</dd>

                    <dt>Consultant</dt>
                    <dd>{{ project.consultant.full_name }}</dd>

                    <dt>Project Status</dt>
                    {% if project.status.level == 10 %}
                    <dd>
                       <span class="label label-info">
                          <span class="fa fa-info-circle"></span> {{ project.status.title|title }} 
                       </span>
                    </dd>
                    {% elif project.status.level == 210 %}
                    <dd>
                       <span class="label label-warning">
                           <span class="fa fa-warning"></span> {{ project.status.title|title }}
                       </span>
                    </dd>
                    {% elif project.status.level == 110 %}
                    <dd>
                       <span class="label label-success">
                           <span class="fa fa-check-square-o"></span> {{ project.status.title|title }}
                       </span>
                    </dd>
                    {% else %}
                    <dd>
                       <span class="label label-danger">
                          <span class="fa fa-warning"></span> {{ claim.status.title|title }} 
                       </span>
                    </dd>
                    {% endif %}
                </dl>
            </div>
        </div><!-- /.card -->
    </div><!-- /.col-sm-6 -->

    <!--  CONTRACT SUMMARY -->
   <div class="col-md-6">
       <div class="card" data-mh="project-summary">
           <div class="card-header" data-background-color="purple">
               <h4 class="title">Contract Summary</h4>
               <p class="category hidden-xs hidden-sm">Description and summary of the construction project</p>
           </div>
           <div class="card-content">
               <dl>
                   <dt>Contract Amount (Including VAT)</dt>
                   {% if project.contract_amount %}
                   <dd>ETB {{ project.contract_amount|intcomma }}</dd>
                   {% else %}
                   <dd class="text-fade">(Not Available)</dd>
                   {% endif %}

                   <dt>Agreement Signing Date</dt>
                   {% if project.signing_date %}
                   <dd>{{ project.signing_date|date:'M d, Y' }}</dd>
                   {% else %}
                   <dd class="text-fade">(Not Available)</dd>
                   {% endif %}

                   <dt>Site Handover Date</dt>
                   {% if project.site_handover %}
                   <dd>{{ project.site_handover|date:'M d, Y' }}</dd>
                   {% else %}
                   <dd class="text-fade">(Not Available)</dd>
                   {% endif %}

                   <dt>Commencement Date</dt>
                   {% if project.commencement_date %}
                   <dd>{{ project.commencement_date|date:'M d, Y' }}</dd>
                   {% else %}
                   <dd class="text-fade">(Not Available)</dd>
                   {% endif %}

                   <dt>Completion Date (Before Time Extensions)</dt>
                   {% if project.completion_date %}
                   <dd>
                   {{ project.completion_date|date:'M d, Y' }} 
                     {% if project.period %} <br>
                         <span class="text-fade text-sm">
                             <i class="fa fa-info-circle"></i>&nbsp; {{ project.period }} Calendar days of Contract Period
                         </span>
                     {% endif %}</dd>
                   {% else %}
                   <dd class="text-fade">(Not Available)</dd>
                   {% endif %}
               </dl>
           </div>
       </div><!-- /.card -->
   </div><!-- /.col-sm-6 -->
  
  <!-- SHORT DESCRIPTION -->
  <div class="col-sm-12">
    <div class="card card-sm">
        <div class="card-header" data-background-color="purple">
            <h4 class="title">Short Description</h4>
            <p class="category hidden-xs hidden-sm">Description and summary of the construction project</p>
        </div>
        <div class="card-content">
           {% if project.description %}
           <p>{{ project.description }}</p>
           {% else %}
           <p class="text-fade">(Not Available)</p>
           {% endif %}
        </div>
    </div><!-- /.card -->
  </div>
</div><!-- /.row -->

<!-- INSURANCE SUMMARY -->
<div class="row">
  <div class="col-sm-12">
      <div class="card card-nav-tabs card-sm">
          <div class="card-header clearfix" data-background-color="purple">
              <div class="row">
                  <div class="col-sm-5">
                      <h4 class="title">Project Insurances</h4>
                      <p class="category hidden-xs hidden-sm">List of all ongoing advance guaranttee bonds for this project</p>
                  </div>

                  <div class="col-sm-7">
                      <div class="nav-tabs-navigation pull-right">
                          <div class="nav-tabs-wrapper">
                              <ul class="nav nav-tabs text-right" data-tabs="tabs">
                                  <li class="active hidden-xs hidden-sm hidden-md hidden-lg">
                                      <a href="#all-insurances" data-toggle="tab">
                                          All
                                          {% if insurance_list.count > 0 %}
                                          <span class="notification notification-info">{{ insurance_list.count }}</span>
                                          {% endif %}
                                      <div class="ripple-container"></div></a>
                                  </li>

                                  <li class="active hidden-xs">
                                      <a href="#active-insurances" data-toggle="tab">
                                          Active
                                          {% if active_insurance_list.count > 0 %}
                                          <span class="notification notification-info">{{ active_insurance_list.count }}</span>
                                          {% endif %}
                                      <div class="ripple-container"></div></a>
                                  </li>

                                  <li class="hidden-xs">
                                      <a href="#expired-insurances" data-toggle="tab">
                                          Expired
                                          {% if expired_insurance_list.count > 0 %}
                                          <span class="notification notification-danger">{{ expired_insurance_list.count }}</span>
                                          {% endif %}
                                      <div class="ripple-container"></div></a>
                                  </li>

                                  <li class="hidden-xs">
                                      <a href="#closed-insurances" data-toggle="tab">
                                          Closed
                                          {% if closed_insurance_list.count > 0 %}
                                          <span class="notification notification-success">{{ closed_insurance_list.count }}</span>
                                          {% endif %}
                                      <div class="ripple-container"></div></a>
                                  </li>
                              </ul>
                          </div>
                      </div>
                  </div>
              </div><!-- /.row -->
          </div><!-- /.card-header -->

          <div class="card-content">
              <div class="tab-content">
                  <div class="tab-pane active hidden-sm hidden-md hidden-lg" id="all-insurances">
                      {% if insurance_list %}
                      <div class="table-responsive">
                          <table class="table">
                              <thead class="text-primary">
                                  <th>Insurance Type</th>
                                  <th>Status</th>
                                  <th>Expiration Date</th>
                                  <th>Days Left</th>
                              </thead>
                              <tbody>
                              {% for insurance in insurance_list %}
                                  <tr>
                                      <td><a href="{% url 'dashboard:project-insurance-detail' insurance.id %}">{{ insurance.insurance_type.title|title }}</a></td>

                                      {% if insurance.status.level >= 0 and insurance.status.level < 100 %}
                                      <td>
                                         <span class="label label-info">
                                             <span class="fa fa-info-circle"></span> {{ insurance.status.title|title }}
                                         </span>
                                      </td>
                                      {% elif insurance.status.level >= 100 and insurance.status.level < 200 %}
                                      <td>
                                         <span class="label label-success">
                                             <span class="fa fa-check-square-o"></span> {{ insurance.status.title|title }}
                                         </span>
                                      </td>
                                      {% elif insurance.status.level >= 200 and insurance.status.level < 300 %}
                                      <td>
                                         <span class="label label-warning">
                                             <span class="fa fa-warning"></span> {{ insurance.status.title|title }}
                                         </span>
                                      </td>
                                      {% else %}
                                      <td>
                                         <span class="label label-danger">
                                             <span class="fa fa-warning"></span> {{ insurance.status.title|title }}
                                         </span>
                                      </td>
                                      {% endif %}

                                      <td>{{ insurance.end_date|naturalday:'M d, Y'|title }}</td>
                                      <td>{{ insurance.get_days_left }}</td>
                                  </tr>
                              {% endfor %}
                              </tbody>
                          </table>
                      </div><!-- /.table-responsive -->
                      {% else %}
                      <div class="banner banner-default push-up-md">
                          <i class="material-icons">info_outline</i>&nbsp; No Record of Active Insurance
                      </div>
                      {% endif %}
                  </div><!-- /.tab-pane #all-insurance -->

                  <div class="tab-pane active hidden-xs" id="active-insurances">
                      {% if active_insurance_list %}
                      <div class="table-responsive">
                          <table class="table">
                              <thead class="text-primary">
                                  <th>Insurance Type</th>
                                  <th>Status</th>
                                  <th>Expiration Date</th>
                                  <th>Days Left</th>
                              </thead>
                              <tbody>
                              {% for insurance in active_insurance_list %}
                                  <tr>
                                      <td><a href="{% url 'dashboard:project-insurance-detail' insurance.id %}">{{ insurance.insurance_type.title|title }}</a></td>

                                      {% if insurance.status.level >= 0 and insurance.status.level < 100 %}
                                      <td>
                                         <span class="label label-info">
                                             <span class="fa fa-info-circle"></span> {{ insurance.status.title|title }}
                                         </span>
                                      </td>
                                      {% elif insurance.status.level >= 100 and insurance.status.level < 200 %}
                                      <td>
                                         <span class="label label-success">
                                             <span class="fa fa-check-square-o"></span> {{ insurance.status.title|title }}
                                         </span>
                                      </td>
                                      {% elif insurance.status.level >= 200 and insurance.status.level < 300 %}
                                      <td>
                                         <span class="label label-warning">
                                             <span class="fa fa-warning"></span> {{ insurance.status.title|title }}
                                         </span>
                                      </td>
                                      {% else %}
                                      <td>
                                         <span class="label label-danger">
                                             <span class="fa fa-warning"></span> {{ insurance.status.title|title }}
                                         </span>
                                      </td>
                                      {% endif %}

                                      <td>{{ insurance.end_date|naturalday:'M d, Y'|title }}</td>
                                      <td>{{ insurance.get_days_left }}</td>
                                  </tr>
                              {% endfor %}
                              </tbody>
                          </table>
                      </div><!-- /.table-responsive -->
                      {% else %}
                      <div class="banner banner-default push-up-md">
                          <i class="material-icons">info_outline</i>&nbsp; No Record of Active Insurance
                      </div>
                      {% endif %}
                  </div><!-- /.tab-pane #active-insurance -->

                  <div class="tab-pane hidden-xs" id="expired-insurances">
                      {% if expired_insurance_list %}
                      <div class="table-responsive">
                          <table class="table">
                              <thead class="text-primary">
                                  <th>Insurance Type</th>
                                  <th>Status</th>
                                  <th>Expiration Date</th>
                              </thead>
                              <tbody>
                              {% for insurance in expired_insurance_list %}
                                  <tr>
                                      <td><a href="{% url 'dashboard:project-insurance-detail' insurance.id %}">{{ insurance.insurance_type.title|title }}</a></td>

                                      {% if insurance.status.level >= 0 and insurance.status.level < 100 %}
                                      <td>
                                         <span class="label label-info">
                                             <span class="fa fa-info-circle"></span> {{ insurance.status.title|title }}
                                         </span>
                                      </td>
                                      {% elif insurance.status.level >= 100 and insurance.status.level < 200 %}
                                      <td>
                                         <span class="label label-success">
                                             <span class="fa fa-check-square-o"></span> {{ insurance.status.title|title }}
                                         </span>
                                      </td>
                                      {% elif insurance.status.level >= 200 and insurance.status.level < 300 %}
                                      <td>
                                         <span class="label label-warning">
                                             <span class="fa fa-warning"></span> {{ insurance.status.title|title }}
                                         </span>
                                      </td>
                                      {% else %}
                                      <td>
                                         <span class="label label-danger">
                                             <span class="fa fa-warning"></span> {{ insurance.status.title|title }}
                                         </span>
                                      </td>
                                      {% endif %}

                                      <td>{{ insurance.end_date|naturalday:'M d, Y'|title }}</td>
                                  </tr>
                              {% endfor %}
                              </tbody>
                          </table>
                      </div><!-- /.table-responsive -->
                      {% else %}
                      <div class="banner banner-default push-up-md">
                          <i class="material-icons">info_outline</i>&nbsp; No Record Expired Insurance
                      </div>
                      {% endif %}
                  </div><!-- /.tab-pane #expired-insurances -->

                  <div class="tab-pane hidden-xs" id="closed-insurances">
                      {% if closed_insurance_list %}
                      <div class="table-responsive">
                          <table class="table">
                              <thead class="text-primary">
                                  <th>Insurance Type</th>
                                  <th>Status</th>
                                  <th>Expiration Date</th>
                              </thead>
                              <tbody>
                              {% for insurance in closed_insurance_list %}
                                  <tr>
                                      <td><a href="{% url 'dashboard:project-insurance-detail' insurance.id %}">{{ insurance.insurance_type.title|title }}</a></td>

                                      {% if insurance.status.level >= 0 and insurance.status.level < 100 %}
                                      <td>
                                         <span class="label label-info">
                                             <span class="fa fa-info-circle"></span> {{ insurance.status.title|title }}
                                         </span>
                                      </td>
                                      {% elif insurance.status.level >= 100 and insurance.status.level < 200 %}
                                      <td>
                                         <span class="label label-success">
                                             <span class="fa fa-check-square-o"></span> {{ insurance.status.title|title }}
                                         </span>
                                      </td>
                                      {% elif insurance.status.level >= 200 and insurance.status.level < 300 %}
                                      <td>
                                         <span class="label label-warning">
                                             <span class="fa fa-warning"></span> {{ insurance.status.title|title }}
                                         </span>
                                      </td>
                                      {% else %}
                                      <td>
                                         <span class="label label-danger">
                                             <span class="fa fa-warning"></span> {{ insurance.status.title|title }}
                                         </span>
                                      </td>
                                      {% endif %}

                                      <td>{{ insurance.end_date|naturalday:'M d, Y'|title }}</td>
                                  </tr>
                              {% endfor %}
                              </tbody>
                          </table>
                      </div><!-- /.table-responsive -->
                      {% else %}
                      <div class="banner banner-default push-up-md">
                          <i class="material-icons">info_outline</i>&nbsp; No Record of closed insurances
                      </div>
                      {% endif %}
                  </div><!-- /.tab-pane #closed-insurances -->
              </div><!-- /.tab-content -->
          </div><!-- /.card-content -->

          {% if user.is_staff %}
          <div class="card-footer">
            <a href="{% url 'dashboard:project-insurance-create' project.id %}" title="Add new insurance" class="btn btn-sm btn-primary pull-right">
               <span class="fa fa-plus-circle"></span>&nbsp; Add 
            </a>
          </div><!-- /.card-footer -->
          {% endif %}
      </div>
  </div>
</div><!-- /.row -->

<!-- PROJECT TIME CLAIMS -->
<div class="row">
  <div class="col-sm-12">
      <div class="card card-nav-tabs card-sm">
          <div class="card-header clearfix" data-background-color="purple">
              <div class="row">
                  <div class="col-sm-5">
                      <h4 class="title">Project Time Claims</h4>
                      <p class="category hidden-xs hidden-sm">List of all ongoing time extension claims status for this project</p>
                  </div>

                  <div class="col-sm-7">
                      <div class="nav-tabs-navigation pull-right">
                          <div class="nav-tabs-wrapper">
                              <ul class="nav nav-tabs text-right" data-tabs="tabs">
                                  <li class="active hidden-xs">
                                      <a href="#all-claims" data-toggle="tab">
                                          All
                                          {% if all_claim_list.count > 0 %}
                                          <span class="notification notification-info">{{ all_claim_list.count }}</span>
                                          {% endif %}
                                      <div class="ripple-container"></div></a>
                                  </li>

                                  <li class="hidden-xs">
                                      <a href="#submitted-claims" data-toggle="tab">
                                          Submitted
                                          {% if submitted_claim_list.count > 0 %}
                                          <span class="notification notification-success">{{ submitted_claim_list.count }}</span>
                                          {% endif %}
                                      <div class="ripple-container"></div></a>
                                  </li>

                                  <li class="hidden-xs">
                                      <a href="#approved-claims" data-toggle="tab">
                                          Approved/Rejected
                                          {% if approved_claim_list.count > 0 %}
                                          <span class="notification notification-danger">{{ approved_claim_list.count }}</span>
                                          {% endif %}
                                      <div class="ripple-container"></div></a>
                                  </li>
                              </ul>
                          </div>
                      </div>
                  </div>
              </div><!-- /.row -->
          </div><!-- /.card-header -->

          <div class="card-content">
              <div class="tab-content">
                  <div class="tab-pane active" id="all-claims">
                     {% if all_claim_list %}
                      <div class="table-responsive">
                          <table class="table">
                              <thead class="text-primary">
                                  <th>Title</th>
                                  <th>Status</th>
                                  <th>Last Updated</th>
                              </thead>
                              <tbody>
                              {% for claim in all_claim_list %}
                                  <tr>
                                      <td><a href="{% url 'dashboard:project-claim-detail' claim.id %}">{{ claim.title|title }}</a></td>

                                      {% if claim.status.level >= 0 and claim.status.level < 100 %}
                                      <td>
                                         <span class="label label-info">
                                             <span class="fa fa-info-circle"></span> {{ claim.status.title|title }}
                                         </span>
                                      </td>
                                      {% elif claim.status.level >= 100 and claim.status.level < 200 %}
                                      <td>
                                         <span class="label label-success">
                                             <span class="fa fa-check-square-o"></span> {{ claim.status.title|title }}
                                         </span>
                                      </td>
                                      {% elif claim.status.level >= 200 and claim.status.level < 300 %}
                                      <td>
                                         <span class="label label-warning">
                                             <span class="fa fa-warning"></span> {{ claim.status.title|title }}
                                         </span>
                                      </td>
                                      {% else %}
                                      <td>
                                         <span class="label label-danger">
                                             <span class="fa fa-warning"></span> {{ claim.status.title|title }}
                                         </span>
                                      </td>
                                      {% endif %}

                                      <td>{{ claim.updated_at|naturalday:'M d, Y'|title }}</td>
                                  </tr>
                              {% endfor %}
                              </tbody>
                          </table>
                      </div><!-- /.table-responsive -->
                     {% else %}
                     <div class="banner banner-default">
                         <i class="material-icons">info_outline</i>&nbsp; No Records of Time Claims
                     </div>
                     {% endif %}
                  </div><!-- /.tab-pane #all-variations -->

                  <div class="tab-pane" id="submitted-claims">
                      {% if submitted_claim_list %}
                      <div class="table-responsive">
                          <table class="table">
                              <thead class="text-primary">
                                  <th>Title</th>
                                  <th>Status</th>
                                  <th>Last Updated</th>
                              </thead>
                              <tbody>
                              {% for claim in submitted_claim_list %}
                                  <tr>
                                      <td><a href="{% url 'dashboard:project-claim-detail' claim.id %}">{{ claim.title|title }}</a></td>

                                      {% if claim.status.level >= 0 and claim.status.level < 100 %}
                                      <td>
                                         <span class="label label-info">
                                             <span class="fa fa-info-circle"></span> {{ claim.status.title|title }}
                                         </span>
                                      </td>
                                      {% elif claim.status.level >= 100 and claim.status.level < 200 %}
                                      <td>
                                         <span class="label label-success">
                                             <span class="fa fa-check-square-o"></span> {{ claim.status.title|title }}
                                         </span>
                                      </td>
                                      {% elif claim.status.level >= 200 and claim.status.level < 300 %}
                                      <td>
                                         <span class="label label-warning">
                                             <span class="fa fa-warning"></span> {{ claim.status.title|title }}
                                         </span>
                                      </td>
                                      {% else %}
                                      <td>
                                         <span class="label label-danger">
                                             <span class="fa fa-warning"></span> {{ claim.status.title|title }}
                                         </span>
                                      </td>
                                      {% endif %}

                                      <td>{{ claim.updated_at|naturalday:'M d, Y'|title }}</td>
                                  </tr>
                              {% endfor %}
                              </tbody>
                          </table>
                      </div><!-- /.table-responsive -->
                      {% else %}
                      <div class="banner banner-default">
                          <i class="material-icons">info_outline</i>&nbsp; No Records of Submitted Time Claims
                      </div>
                      {% endif %}
                  </div><!-- /.tab-pane #submitted-claims -->

                  <div class="tab-pane" id="approved-claims">
                      {% if approved_claim_list %}
                      <div class="table-responsive">
                          <table class="table">
                              <thead class="text-primary">
                                  <th>Title</th>
                                  <th>Status</th>
                                  <th>Last Updated</th>
                              </thead>
                              <tbody>
                              {% for claim in approved_claim_list %}
                                  <tr>
                                      <td><a href="{% url 'dashboard:project-claim-detail' claim.id %}">{{ claim.title|title }}</a></td>

                                      {% if claim.status.level >= 0 and claim.status.level < 100 %}
                                      <td>
                                         <span class="label label-info">
                                             <span class="fa fa-info-circle"></span> {{ claim.status.title|title }}
                                         </span>
                                      </td>
                                      {% elif claim.status.level >= 100 and claim.status.level < 200 %}
                                      <td>
                                         <span class="label label-success">
                                             <span class="fa fa-check-square-o"></span> {{ claim.status.title|title }}
                                         </span>
                                      </td>
                                      {% elif claim.status.level >= 200 and claim.status.level < 300 %}
                                      <td>
                                         <span class="label label-warning">
                                             <span class="fa fa-warning"></span> {{ claim.status.title|title }}
                                         </span>
                                      </td>
                                      {% else %}
                                      <td>
                                         <span class="label label-danger">
                                             <span class="fa fa-warning"></span> {{ claim.status.title|title }}
                                         </span>
                                      </td>
                                      {% endif %}

                                      <td>{{ claim.updated_at|naturalday:'M d, Y'|title }}</td>
                                  </tr>
                              {% endfor %}
                              </tbody>
                          </table>
                      </div><!-- /.table-responsive -->
                      {% else %}
                      <div class="banner banner-default">
                          <i class="material-icons">info_outline</i>&nbsp; No Records of Approved/Rejected Time Claims
                      </div>
                      {% endif %}
                  </div><!-- /.tab-pane #approved-claims -->
              </div><!-- /.tab-content -->
          </div><!-- /.card-content -->
          
          {% if user.is_staff %}
          <div class="card-footer">
            <a href="{% url 'dashboard:project-claim-create' project.id %}" title="Add new claim" class="btn btn-sm btn-primary pull-right">
               <span class="fa fa-plus-circle"></span>&nbsp; Add 
            </a>
          </div><!-- /.card-footer -->
          {% endif %}
      </div><!-- /.card -->
  </div>
</div><!-- /.row -->

<!-- PROJECT VARIATIONS -->
<div class="row">
  <div class="col-sm-12">
      <div class="card card-nav-tabs card-sm">
          <div class="card-header clearfix" data-background-color="purple">
              <div class="row">
                  <div class="col-sm-5">
                      <h4 class="title">Project Variations</h4>
                      <p class="category hidden-xs hidden-sm">List of all ongoing variation status for this project</p>
                  </div>

                  <div class="col-sm-7">
                      <div class="nav-tabs-navigation pull-right">
                          <div class="nav-tabs-wrapper">
                              <ul class="nav nav-tabs text-right" data-tabs="tabs">
                                  <li class="active hidden-xs">
                                      <a href="#all-variations" data-toggle="tab">
                                          All
                                          {% if all_variation_list.count > 0 %}
                                          <span class="notification notification-info">{{ all_variation_list.count }}</span>
                                          {% endif %}
                                      <div class="ripple-container"></div></a>
                                  </li>
                                  <li class="hidden-xs">
                                      <a href="#under-prep-variations" data-toggle="tab">
                                          Under Prep.
                                          {% if under_prep_variation_list.count > 0 %}
                                          <span class="notification notification-info">{{ under_prep_variation_list.count }}</span>
                                          {% endif %}
                                      <div class="ripple-container"></div></a>
                                  </li>

                                  <li class="hidden-xs">
                                      <a href="#pending-variations" data-toggle="tab">
                                          Pending
                                          {% if pending_variation_list.count > 0 %}
                                          <span class="notification notification-warning">{{ pending_variation_list.count }}</span>
                                          {% endif %}
                                      <div class="ripple-container"></div></a>
                                  </li>

                                  <li class="hidden-xs">
                                      <a href="#submitted-variations" data-toggle="tab">
                                          Submitted
                                          {% if submitted_variation_list.count > 0 %}
                                          <span class="notification notification-success">{{ submitted_variation_list.count }}</span>
                                          {% endif %}
                                      <div class="ripple-container"></div></a>
                                  </li>

                                  <li class="hidden-xs">
                                      <a href="#approved-variations" data-toggle="tab">
                                          Approved/Rejected
                                          {% if approved_variation_list.count > 0 %}
                                          <span class="notification notification-danger">{{ approved_variation_list.count }}</span>
                                          {% endif %}
                                      <div class="ripple-container"></div></a>
                                  </li>
                              </ul>
                          </div>
                      </div>
                  </div>
              </div><!-- /.row -->
          </div><!-- /.card-header -->

          <div class="card-content">
              <div class="tab-content">
                  <div class="tab-pane active" id="all-variations">
                      {% if all_variation_list %}
                      <div class="table-responsive">
                          <table class="table">
                              <thead class="text-primary">
                                  <th>Title</th>
                                  <th>Work Order No.</th>
                                  <th>Status</th>
                                  <th>Last Updated</th>
                              </thead>
                              <tbody>
                              {% for variation in all_variation_list %}
                                  <tr>
                                      <td><a href="{% url 'dashboard:project-variation-detail' variation.id %}">{{ variation.title|title }}</a></td>

                                      {% if variation.work_order %}
                                      <td>{{ variation.work_order }}</td>
                                      {% else %}
                                      <td class="text-fade">(None)</td>
                                      {% endif %}

                                      {% if variation.status.level >= 0 and variation.status.level < 100 %}
                                      <td>
                                         <span class="label label-info">
                                             <span class="fa fa-info-circle"></span> {{ variation.status.title|title }}
                                         </span>
                                      </td>
                                      {% elif variation.status.level >= 100 and variation.status.level < 200 %}
                                      <td>
                                         <span class="label label-success">
                                             <span class="fa fa-check-square-o"></span> {{ variation.status.title|title }}
                                         </span>
                                      </td>
                                      {% elif variation.status.level >= 200 and variation.status.level < 300 %}
                                      <td>
                                         <span class="label label-warning">
                                             <span class="fa fa-warning"></span> {{ variation.status.title|title }}
                                         </span>
                                      </td>
                                      {% else %}
                                      <td>
                                         <span class="label label-danger">
                                             <span class="fa fa-warning"></span> {{ variation.status.title|title }}
                                         </span>
                                      </td>
                                      {% endif %}

                                      <td>{{ variation.updated_at|naturalday:'M d, Y'|title }}</td>
                                  </tr>
                              {% endfor %}
                              </tbody>
                          </table>
                      </div><!-- /.table-responsive -->
                      {% else %}
                      <div class="banner banner-default push-up-md">
                          <i class="material-icons">info_outline</i>&nbsp; No Records of Variations
                      </div>
                      {% endif %}
                  </div><!-- /.tab-pane #all-variations -->

                  <div class="tab-pane" id="under-prep-variations">
                      {% if under_prep_variation_list %}
                      <div class="table-responsive">
                          <table class="table">
                              <thead class="text-primary">
                                  <th>Title</th>
                                  <th>Work Order No.</th>
                                  <th>Status</th>
                                  <th>Last Updated</th>
                              </thead>
                              <tbody>
                              {% for variation in under_prep_variation_list %}
                                  <tr>
                                      <td><a href="{% url 'dashboard:project-variation-detail' variation.id %}">{{ variation.title|title }}</a></td>

                                      {% if variation.work_order %}
                                      <td>{{ variation.work_order }}</td>
                                      {% else %}
                                      <td class="text-fade">(None)</td>
                                      {% endif %}

                                      {% if variation.status.level >= 0 and variation.status.level < 100 %}
                                      <td>
                                         <span class="label label-info">
                                             <span class="fa fa-info-circle"></span> {{ variation.status.title|title }}
                                         </span>
                                      </td>
                                      {% elif variation.status.level >= 100 and variation.status.level < 200 %}
                                      <td>
                                         <span class="label label-success">
                                             <span class="fa fa-check-square-o"></span> {{ variation.status.title|title }}
                                         </span>
                                      </td>
                                      {% elif variation.status.level >= 200 and variation.status.level < 300 %}
                                      <td>
                                         <span class="label label-warning">
                                             <span class="fa fa-warning"></span> {{ variation.status.title|title }}
                                         </span>
                                      </td>
                                      {% else %}
                                      <td>
                                         <span class="label label-danger">
                                             <span class="fa fa-warning"></span> {{ variation.status.title|title }}
                                         </span>
                                      </td>
                                      {% endif %}

                                      <td>{{ variation.updated_at|naturalday:'M d, Y'|title }}</td>
                                  </tr>
                              {% endfor %}
                              </tbody>
                          </table>
                      </div><!-- /.table-responsive -->
                      {% else %}
                      <div class="banner banner-default push-up-md">
                          <i class="material-icons">info_outline</i>&nbsp; No Variation is Currently Under Preparation
                      </div>
                      {% endif %}
                  </div><!-- /.tab-pane #under-prep-variations -->

                  <div class="tab-pane" id="pending-variations">
                      {% if pending_variation_list %}
                      <div class="table-responsive">
                          <table class="table">
                              <thead class="text-primary">
                                  <th>Title</th>
                                  <th>Work Order No.</th>
                                  <th>Status</th>
                                  <th>Last Updated</th>
                              </thead>
                              <tbody>
                              {% for variation in pending_variation_list %}
                                  <tr>
                                      <td><a href="{% url 'dashboard:project-variation-detail' variation.id %}">{{ variation.title|title }}</a></td>

                                      {% if variation.work_order %}
                                      <td>{{ variation.work_order }}</td>
                                      {% else %}
                                      <td class="text-fade">(None)</td>
                                      {% endif %}

                                      {% if variation.status.level >= 0 and variation.status.level < 100 %}
                                      <td>
                                         <span class="label label-info">
                                             <span class="fa fa-info-circle"></span> {{ variation.status.title|title }}
                                         </span>
                                      </td>
                                      {% elif variation.status.level >= 100 and variation.status.level < 200 %}
                                      <td>
                                         <span class="label label-success">
                                             <span class="fa fa-check-square-o"></span> {{ variation.status.title|title }}
                                         </span>
                                      </td>
                                      {% elif variation.status.level >= 200 and variation.status.level < 300 %}
                                      <td>
                                         <span class="label label-warning">
                                             <span class="fa fa-warning"></span> {{ variation.status.title|title }}
                                         </span>
                                      </td>
                                      {% else %}
                                      <td>
                                         <span class="label label-danger">
                                             <span class="fa fa-warning"></span> {{ variation.status.title|title }}
                                         </span>
                                      </td>
                                      {% endif %}

                                      <td>{{ variation.updated_at|naturalday:'M d, Y'|title }}</td>
                                  </tr>
                              {% endfor %}
                              </tbody>
                          </table>
                      </div><!-- /.table-responsive -->
                      {% else %}
                      <div class="banner banner-default push-up-md">
                          <i class="material-icons">info_outline</i>&nbsp; No Variation is Currently Pending
                      </div>
                      {% endif %}
                  </div><!-- /.tab-pane #pending-variations -->

                  <div class="tab-pane" id="submitted-variations">
                      {% if submitted_variation_list %}
                      <div class="table-responsive">
                          <table class="table">
                              <thead class="text-primary">
                                  <th>Title</th>
                                  <th>Work Order No.</th>
                                  <th>Status</th>
                                  <th>Last Updated</th>
                              </thead>
                              <tbody>
                              {% for variation in submitted_variation_list %}
                                  <tr>
                                      <td><a href="{% url 'dashboard:project-variation-detail' variation.id %}">{{ variation.title|title }}</a></td>

                                      {% if variation.work_order %}
                                      <td>{{ variation.work_order }}</td>
                                      {% else %}
                                      <td class="text-fade">(None)</td>
                                      {% endif %}

                                      {% if variation.status.level >= 0 and variation.status.level < 100 %}
                                      <td>
                                         <span class="label label-info">
                                             <span class="fa fa-info-circle"></span> {{ variation.status.title|title }}
                                         </span>
                                      </td>
                                      {% elif variation.status.level >= 100 and variation.status.level < 200 %}
                                      <td>
                                         <span class="label label-success">
                                             <span class="fa fa-check-square-o"></span> {{ variation.status.title|title }}
                                         </span>
                                      </td>
                                      {% elif variation.status.level >= 200 and variation.status.level < 300 %}
                                      <td>
                                         <span class="label label-warning">
                                             <span class="fa fa-warning"></span> {{ variation.status.title|title }}
                                         </span>
                                      </td>
                                      {% else %}
                                      <td>
                                         <span class="label label-danger">
                                             <span class="fa fa-warning"></span> {{ variation.status.title|title }}
                                         </span>
                                      </td>
                                      {% endif %}

                                      <td>{{ variation.updated_at|naturalday:'M d, Y'|title }}</td>
                                  </tr>
                              {% endfor %}
                              </tbody>
                          </table>
                      </div><!-- /.table-responsive -->
                      {% else %}
                      <div class="banner banner-default push-up-md">
                          <i class="material-icons">info_outline</i>&nbsp; No record of Submitted Variations
                      </div>
                      {% endif %}
                  </div><!-- /.tab-pane #submitted-variations -->

                  <div class="tab-pane" id="approved-variations">
                      {% if approved_variation_list %}
                      <div class="table-responsive">
                          <table class="table">
                              <thead class="text-primary">
                                  <th>Title</th>
                                  <th>Work Order No.</th>
                                  <th>Status</th>
                                  <th>Last Updated</th>
                              </thead>
                              <tbody>
                              {% for variation in approved_variation_list %}
                                  <tr>
                                      <td><a href="{% url 'dashboard:project-variation-detail' variation.id %}">{{ variation.title|title }}</a></td>

                                      {% if variation.work_order %}
                                      <td>{{ variation.work_order }}</td>
                                      {% else %}
                                      <td class="text-fade">(None)</td>
                                      {% endif %}

                                      {% if variation.status.level >= 0 and variation.status.level < 100 %}
                                      <td>
                                         <span class="label label-info">
                                             <span class="fa fa-info-circle"></span> {{ variation.status.title|title }}
                                         </span>
                                      </td>
                                      {% elif variation.status.level >= 100 and variation.status.level < 200 %}
                                      <td>
                                         <span class="label label-success">
                                             <span class="fa fa-check-square-o"></span> {{ variation.status.title|title }}
                                         </span>
                                      </td>
                                      {% elif variation.status.level >= 200 and variation.status.level < 300 %}
                                      <td>
                                         <span class="label label-warning">
                                             <span class="fa fa-warning"></span> {{ variation.status.title|title }}
                                         </span>
                                      </td>
                                      {% else %}
                                      <td>
                                         <span class="label label-danger">
                                             <span class="fa fa-warning"></span> {{ variation.status.title|title }}
                                         </span>
                                      </td>
                                      {% endif %}

                                      <td>{{ variation.updated_at|naturalday:'M d, Y'|title }}</td>
                                  </tr>
                              {% endfor %}
                              </tbody>
                          </table>
                      </div><!-- /.table-responsive -->
                      {% else %}
                      <div class="banner banner-default push-up-md">
                          <i class="material-icons">info_outline</i>&nbsp; No record of Approved/Rejected Variations
                      </div>
                      {% endif %}
                  </div><!-- /.tab-pane #approved-variations -->
              </div><!-- /.tab-content -->
          </div><!-- /.card-content -->

          {% if user.is_staff %}
          <div class="card-footer">
            <a href="{% url 'dashboard:project-variation-create' project.id %}" title="Add new variation" class="btn btn-sm btn-primary pull-right">
               <span class="fa fa-plus-circle"></span>&nbsp; Add 
            </a>
          </div><!-- /.card-footer -->
          {% endif %}
      </div>
  </div>
</div><!-- /.row -->

{% if user.is_staff %}
<div class="row">
    <div class="col-sm-12 bottom-btn-container">
        <a href="{% url 'dashboard:project-update' project.id %}" title="Update project" class="btn btn-primary">
           <span class="fa fa-edit"></span>&nbsp; Update Project
        </a>

        <a href="{% url 'dashboard:project-delete' project.id %}" title="Delete project" class="btn btn-danger pull-right">
           Delete  
        </a>
    </div>
</div>
{% endif %}
{% endblock content %}

{% block script %}
<!-- MATCH HEIGHT JQUERY PLUGIN -->
<script src="{% static 'assets/js/jquery.matchHeight-min.js' %}" type="text/javascript"></script>
{% endblock script %}